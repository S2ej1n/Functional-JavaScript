<!DOCTYPE html>
<html lang="ko">
<body>

<h3>ğŸ§ ìŒì ˆ ê¸¸ì´(duration) ìë™ ì¸¡ì •ê¸°</h3>
<p>
ë…¸ë˜ë§ˆë‹¤ ìŠ¤í˜ì´ìŠ¤ ëˆ„ë¥´ì„¸ìš”
</p>

<pre id="log" style="background:#eee; padding:10px; white-space: pre-wrap;"></pre>

<script>
const log = document.getElementById("log");

let timestamps = [];      // ê° ìŒì ˆ ì‹œì‘ "ìƒëŒ€ ì‹œê°„" ì €ì¥
let baseTime = null;      // ì²« ìŠ¤í˜ì´ìŠ¤ë°” ê¸°ì¤€ ì‹œê°„

document.addEventListener("keydown", (e) => {
  if (e.code === "Space") {
    // ê¸°ë³¸ ë™ì‘(í˜ì´ì§€ ìŠ¤í¬ë¡¤ ë“±) ë§‰ê¸°
    e.preventDefault();

    const now = performance.now(); // ms ë‹¨ìœ„

    if (baseTime === null) {
      baseTime = now;             // ì²« ë²ˆì§¸ ìŠ¤í˜ì´ìŠ¤ ì‹œì  ê¸°ì¤€
    }

    const t = (now - baseTime) / 1000; // ì´ˆ ë‹¨ìœ„ë¡œ ë³€í™˜
    timestamps.push(t);

    log.textContent += `[start] ${t.toFixed(2)}s\n`;
  }
});

// duration ê³„ì‚° í•¨ìˆ˜
function calculateDurations() {
  if (timestamps.length < 2) {
    log.textContent += `\n(ê³„ì‚°í•  êµ¬ê°„ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. ìµœì†Œ 2ë²ˆ ì´ìƒ ì°ì–´ì•¼ í•´ìš”)\n`;
    return;
  }

  let durations = [];
  for (let i = 0; i < timestamps.length - 1; i++) {
    const d = timestamps[i+1] - timestamps[i];
    durations.push(d);
  }

  log.textContent += `\n=== Duration Result (ì´ˆ) ===\n`;
  durations.forEach((d, i) => {
    log.textContent += `ìŒì ˆ${i+1}: ${d.toFixed(2)}ì´ˆ\n`;
  });

  // JS ë”œë ˆì´(ms) ë°°ì—´ í˜•íƒœë„ ê°™ì´ ì¶œë ¥í•´ ì¤„ê²Œ
  log.textContent += `\n=== JS delay(ms) ë°°ì—´ ===\n[`;
  log.textContent += durations.map(d => Math.round(d * 1000)).join(", ");
  log.textContent += `]\n`;
}

// ì½˜ì†”ì—ì„œ finish() ì¹˜ë©´ ê¸¸ì´ ê³„ì‚°
window.finish = calculateDurations;
</script>

<p>ë…¸ë˜ ëë‚˜ê³  ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ <b>finish()</b> ì…ë ¥í•˜ë©´ ê¸¸ì´ ê³„ì‚°ë©ë‹ˆë‹¤.</p>

</body>
</html>
